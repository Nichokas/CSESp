<div class="max-w-5xl mx-auto px-4">
  <h1 class="font-serif text-5xl md:text-6xl tracking-tight mb-2" style="color: #1e1e1e; font-family: 'Crimson Text', 'Garamond', 'Baskerville', serif;">
    <%= @problem.name %>
  </h1>

  <hr class="border-t border-gray-200 mb-8">

  <!-- Replace the single paragraph with a flex container -->
  <div class="flex flex-col md:flex-row gap-6 mt-4">
    <div class="md:w-2/3">
      <p style="white-space: pre-wrap;"><%= @problem.problem_description %></p>
    </div>

    <% if @problem.image.present? %>
      <div class="md:w-1/3 flex justify-center items-start">
        <img src="<%= @problem.image %>" alt="<%= @problem.name %> visual" class="rounded-lg shadow-md max-w-full object-contain">
      </div>
    <% end %>
  </div>

  <details class="mt-8 mb-12 group">
    <summary class="flex items-center cursor-pointer">
      <span class="font-semibold text-lg text-gray-600">Pistas</span>
      <svg class="w-5 h-5 ml-2 text-gray-500 transform transition-transform group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </summary>

    <div class="pt-4 pl-4">
      <% if @problem.respond_to?(:hints) && @problem.hints.present? %>
        <ul class="list-disc pl-5 space-y-2">
          <% @problem.hints.each do |hint| %>
            <li><%= hint %></li>
          <% end %>
        </ul>
      <% else %>
        <p>No hay pistas disponibles para este problema.</p>
      <% end %>
    </div>
  </details>

  <h1 class="font-serif text-5xl md:text-6xl tracking-tight mt-8 mb-2" style="color: #1e1e1e; font-family: 'Crimson Text', 'Garamond', 'Baskerville', serif;">
    Demo
  </h1>
  <hr class="border-t border-gray-200 mb-8">

  <div id="asciicast-container-hm4D2dOF0mYrf8QGolrbOx5dF" class="asciicast" style="display: block; float: none; overflow: hidden; padding: 0px; margin: 1.5em 0px; color-scheme: light dark;"><iframe src="<%= raw @problem.demo %>/iframe?autoplay=1&amp;cols=80&amp;loop=1&amp;rows=12" scrolling="no" allowfullscreen="true" style="overflow: hidden; margin: 0px; border: 0px; display: inline-block; width: 100%; float: none; visibility: visible; height: 449px;" title="Terminal session recording"></iframe></div>

  <h1 class="font-serif text-5xl md:text-6xl tracking-tight mt-8 mb-2" style="color: #1e1e1e; font-family: 'Crimson Text', 'Garamond', 'Baskerville', serif;">
    Antes De Empezar
  </h1>
  <hr class="border-t border-gray-200 mb-8">

  <p style="white-space: pre-wrap;" class="mt-4">Asegúrate de haber descargado el archivo zip correspondiente a tu sistema operativo y de estar escribiendo tu programa en el archivo <%= @problem.short_name %>.py para poder usar la herramienta de prueba automática de código, y de también de tener python instalado correctamente en tu ordenador. Puedes verificar si tienes python instalado ejecutando el siguiente comando en tu terminal:</p>
  <div class="group relative bg-gray-50 rounded-lg mt-6 mb-8 border border-gray-200 shadow-sm">
    <div class="relative p-4 text-gray-800 bg-gray-50 font-mono text-sm">
      <button onclick="copyCode(this)" class="absolute top-2 right-2 text-gray-500 hover:text-red-800 focus:outline-none transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
      </button>
      <code class="block whitespace-pre-wrap">python --version</code>
    </div>
  </div>
  <p>o dependiendo de como sea tu instalacion de python el comando también podría ser:</p>
  <div class="group relative bg-gray-50 rounded-lg mt-6 mb-8 border border-gray-200 shadow-sm">
    <div class="relative p-4 text-gray-800 bg-gray-50 font-mono text-sm">
      <button onclick="copyCode(this)" class="absolute top-2 right-2 text-gray-500 hover:text-red-800 focus:outline-none transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
      </button>
      <code class="block whitespace-pre-wrap">python3 --version</code>
    </div>
  </div>
  <div class="bg-gray-50 text-gray-800 rounded-xl p-5 shadow-lg border-2 border-gray-200 mt-8 mb-10 overflow-x-auto w-full">
    <div class="flex items-center justify-between pb-3 mb-3 border-b-2 border-gray-200">
      <div class="flex items-center">
        <button type="button"
                class="inline-flex items-center justify-center p-2 text-gray-700 bg-gray-50 rounded-lg hover:bg-gray-100 focus:ring-2 focus:ring-gray-200 flex-shrink-0 mr-4">
          <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
          </svg>
        </button>
        <h3 class="font-semibold text-lg">Archivos</h3>
      </div>

      <a href="#" id="tutorial-link" class="inline-flex items-center text-sm text-gray-600 hover:text-red-800 transition-colors">
        <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Tutorial para el uso de la herramienta de correccion desde VSCode
      </a>
    </div>

    <ul class="list-disc pl-5 space-y-2">
      <% @problem.files.each do |file| %>
        <% filename = file.split("/").last %>
        <li>
          <a href="<%= file %>" class="text-gray-700 hover:text-red-800 hover:underline transition-colors">
            <%= filename %>
          </a>
        </li>
      <% end %>
    </ul>
  </div>

  <h1 class="font-serif text-5xl md:text-6xl tracking-tight mt-8 mb-2" style="color: #1e1e1e; font-family: 'Crimson Text', 'Garamond', 'Baskerville', serif;">
    Como probar el codigo
  </h1>
  <hr class="border-t border-gray-200 mb-8">

  <p>Para probar tu codigo debes abrir una terminal en el directorio donde se encuentra <%= @problem.short_name %>.py, una vez estando ya en el directorio correcto pon el siguente commando que ejecutara la herramienta de prueba de codigo automatica:</p>
  <h3 class="font-semibold text-xl text-gray-800 mt-6 mb-2">Comando para Linux y MacOS:</h3>
  <div class="group relative bg-gray-50 rounded-lg mt-2 mb-8 border border-gray-200 shadow-sm">
    <div class="relative p-4 text-gray-800 bg-gray-50 font-mono text-sm">
      <button onclick="copyCode(this)" class="absolute top-2 right-2 text-gray-500 hover:text-red-800 focus:outline-none transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
      </button>
      <code class="block whitespace-pre-wrap">./<%= @problem.short_name %>_test ./<%= @problem.short_name %>.py </code>
    </div>
  </div>
  <h3 class="font-semibold text-xl text-gray-800 mt-6 mb-2">Comando para Windows:</h3>
  <div class="group relative bg-gray-50 rounded-lg mt-2 mb-8 border border-gray-200 shadow-sm">
      <div class="relative p-4 text-gray-800 bg-gray-50 font-mono text-sm">
        <button onclick="copyCode(this)" class="absolute top-2 right-2 text-gray-500 hover:text-red-800 focus:outline-none transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
          </svg>
        </button>
        <code class="block whitespace-pre-wrap">.\<%= @problem.short_name %>_test.exe .\<%= @problem.short_name %>.py </code>
      </div>
  </div>

  <h1 class="font-serif text-5xl md:text-6xl tracking-tight mt-8 mb-2" style="color: #1e1e1e; font-family: 'Crimson Text', 'Garamond', 'Baskerville', serif;">
    Como entregar el ejercicio a tu profesor
  </h1>
  <hr class="border-t border-gray-200 mb-8">

  <script>
      function copyCode(button) {
          const codeBlock = button.closest('.group').querySelector('code');
          const textToCopy = codeBlock.textContent;

          navigator.clipboard.writeText(textToCopy).then(() => {
              const originalHTML = button.innerHTML;
              button.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
      </svg>
    `;

              setTimeout(() => {
                  button.innerHTML = originalHTML;
              }, 1500);
          }).catch(err => {
              console.error('Failed to copy: ', err);
          });
      }
  </script>
</div>